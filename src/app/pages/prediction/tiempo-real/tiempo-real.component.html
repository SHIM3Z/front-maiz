<div class="container mx-auto px-4 py-12">
  <div class="flex flex-col h-full max-w-4xl mx-auto w-full animate-fade-in">
    <button
      (click)="onBack.emit()"
      class="flex items-center gap-2 mb-4 font-bold hover:underline"
      [style.color]="colors.text"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="m12 19-7-7 7-7" />
        <path d="M19 12H5" />
      </svg>
      Volver a selección
    </button>

    <div
      class="relative rounded-3xl overflow-hidden shadow-2xl aspect-video bg-black flex flex-col justify-center items-center border-4"
      [style.borderColor]="colors.accent"
    >
      <!-- Simulación de Cámara -->
      <div
        class="absolute inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center"
      >
        <p class="text-white opacity-50">Vista de Cámara Activa</p>
      </div>

      <!-- Overlay de Escaneo -->
      <div
        class="absolute inset-0 border-2 m-8 rounded-lg opacity-50 animate-pulse flex flex-col justify-between p-4"
        [style.borderColor]="colors.primary"
      >
        <div
          class="flex justify-between text-xs font-mono"
          [style.color]="colors.primary"
        >
          <span>REC ●</span>
          <span>AI_MODULE_V2</span>
        </div>
        <div
          class="text-center font-mono text-sm"
          [style.color]="colors.primary"
        >
          ESCANEANDO GRANO...
        </div>
      </div>

      <!-- HUD Central -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="64"
        height="64"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="text-white opacity-80 animate-spin-slow absolute"
      >
        <path d="M3 7V5a2 2 0 0 1 2-2h2" />
        <path d="M17 3h2a2 2 0 0 1 2 2v2" />
        <path d="M21 17v2a2 2 0 0 1-2 2h-2" />
        <path d="M7 21H5a2 2 0 0 1-2-2v-2" />
      </svg>

      <!-- Resultados Flotantes -->
      @if (detectedData(); as data) {
      <div
        class="absolute bottom-4 left-4 right-4 p-4 rounded-xl backdrop-blur-md bg-black/60 border border-white/20 flex justify-between items-center animate-slide-up"
      >
        <div>
          <p class="text-xs text-gray-300 uppercase">Clasificación</p>
          <h3 class="text-xl font-bold" [style.color]="colors.accent">
            {{ data.quality }}
          </h3>
        </div>
        <div class="text-right">
          <p class="text-xs text-gray-300 uppercase">Salud</p>
          <h3 class="text-xl font-bold" style="color: #4ade80">
            {{ data.health }}
          </h3>
        </div>
      </div>
      }
    </div>

    <p class="mt-4 text-center text-sm opacity-70" [style.color]="colors.text">
      Apunta la cámara hacia la mazorca o el grupo de granos para un análisis
      instantáneo.
    </p>
  </div>
</div>
